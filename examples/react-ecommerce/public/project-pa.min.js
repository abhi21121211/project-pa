/*! Project PA v1.0.0 | MIT License */
var ProjectPA=(()=>{var h=`/* Project PA Core Styles */

:root {
  --pa-primary: #2563eb;
  --pa-primary-hover: #1d4ed8;
  --pa-bg: #ffffff;
  --pa-text: #1e293b;
  --pa-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --pa-overlay-z: 999999;
}

/* Floating Widget */
.pa-widget-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: var(--pa-primary);
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: var(--pa-shadow);
  z-index: var(--pa-overlay-z);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s, background-color 0.2s;
  font-family: system-ui, -apple-system, sans-serif;
}

.pa-widget-btn:hover {
  background-color: var(--pa-primary-hover);
  transform: scale(1.05);
}

.pa-widget-icon {
  width: 24px;
  height: 24px;
  fill: currentColor;
}

/* Popup Window */
.pa-popup {
  position: fixed;
  bottom: 90px;
  right: 20px;
  width: 320px;
  background: var(--pa-bg);
  border-radius: 12px;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  padding: 16px;
  z-index: var(--pa-overlay-z);
  font-family: system-ui, -apple-system, sans-serif;
  color: var(--pa-text);
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.2s, transform 0.2s;
  pointer-events: none;
}

.pa-popup.pa-visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.pa-popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  font-weight: 600;
}

.pa-header-controls {
  display: flex;
  gap: 8px;
  align-items: center;
}

.pa-popup-close,
.pa-popup-mute {
  background: none;
  border: none;
  cursor: pointer;
  color: #64748b;
  padding: 4px;
  font-size: 16px;
  line-height: 1;
}

.pa-popup-close:hover,
.pa-popup-mute:hover {
  color: #1e293b;
}

.pa-popup-content {
  margin-bottom: 16px;
  line-height: 1.5;
  color: #334155;
  max-height: 200px;
  overflow-y: auto;
  padding-right: 4px;
  /* Space for scrollbar */
}

/* Custom Scrollbar for Webkit */
.pa-popup-content::-webkit-scrollbar {
  width: 4px;
}

.pa-popup-content::-webkit-scrollbar-track {
  background: #f1f5f9;
}

.pa-popup-content::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 2px;
}

.pa-popup-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top: 1px solid #e2e8f0;
  padding-top: 12px;
}

.pa-btn {
  padding: 6px 12px;
  border-radius: 6px;
  border: 1px solid #e2e8f0;
  background: white;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: all 0.2s;
}

.pa-btn:hover {
  background: #f8fafc;
}

.pa-btn-primary {
  background: var(--pa-primary);
  color: white;
  border-color: var(--pa-primary);
}

.pa-btn-primary:hover {
  background: var(--pa-primary-hover);
}

/* Highlight Overlay */
.pa-highlight-overlay {
  position: absolute;
  border: 2px solid var(--pa-primary);
  border-radius: 4px;
  pointer-events: none;
  z-index: calc(var(--pa-overlay-z) - 1);
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
  transition: all 0.3s ease;
}`;function u(r){let t=document.createElement("button");return t.className="pa-widget-btn",t.innerHTML=`
    <svg class="pa-widget-icon" viewBox="0 0 24 24">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"/>
    </svg>
  `,t.title="Start Project Tour",t.addEventListener("click",()=>{r()}),document.body.appendChild(t),t}var i=class{constructor(){this.element=this.createPopup(),this.onNext=null,this.onPrev=null,this.onClose=null}createPopup(){let t=document.createElement("div");return t.className="pa-popup",t.innerHTML=`
      <div class="pa-popup-header">
        <span class="pa-step-title">Project Tour</span>
        <div class="pa-header-controls">
          <button class="pa-popup-mute" title="Toggle Sound">\u{1F50A}</button>
          <button class="pa-popup-close" title="Close">\xD7</button>
        </div>
      </div>
      <div class="pa-popup-content"></div>
      <div class="pa-popup-controls">
        <button class="pa-btn pa-btn-prev">Previous</button>
        <span class="pa-step-counter"></span>
        <button class="pa-btn pa-btn-primary pa-btn-next">Next</button>
      </div>
    `,t.querySelector(".pa-popup-close").onclick=()=>this.onClose?.(),t.querySelector(".pa-popup-mute").onclick=e=>{let o=this.onMuteToggle?.();e.target.textContent=o?"\u{1F507}":"\u{1F50A}"},t.querySelector(".pa-btn-prev").onclick=()=>this.onPrev?.(),t.querySelector(".pa-btn-next").onclick=()=>this.onNext?.(),document.body.appendChild(t),t}show(t,e,o){let s=this.element.querySelector(".pa-popup-content"),c=this.element.querySelector(".pa-step-counter"),g=this.element.querySelector(".pa-btn-prev"),m=this.element.querySelector(".pa-btn-next");s.textContent=t,c.textContent=`${e+1} / ${o}`,g.disabled=e===0,m.textContent=e===o-1?"Finish":"Next",this.element.classList.add("pa-visible")}hide(){this.element.classList.remove("pa-visible")}};var n=class{constructor(){this.overlay=document.createElement("div"),this.overlay.className="pa-highlight-overlay",this.overlay.style.display="none",document.body.appendChild(this.overlay)}highlight(t){if(!t||t==="body"){this.hide();return}let e=document.querySelector(t);if(!e){console.warn(`Project PA: Element not found: ${t}`),this.hide();return}e.scrollIntoView({behavior:"smooth",block:"center"});let o=e.getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft;this.overlay.style.width=`${o.width+8}px`,this.overlay.style.height=`${o.height+8}px`,this.overlay.style.top=`${o.top+s-4}px`,this.overlay.style.left=`${o.left+c-4}px`,this.overlay.style.display="block"}hide(){this.overlay.style.display="none"}};var p=class{constructor(){this.synth=window.speechSynthesis,this.isMuted=!1,this.voice=null,this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>this.loadVoices()),this.loadVoices()}loadVoices(){let t=this.synth.getVoices();this.voice=t.find(e=>e.name.includes("Google")&&e.lang.startsWith("en"))||t.find(e=>e.lang.startsWith("en"))||t[0]}speak(t){if(this.isMuted||!this.synth)return;this.stop();let e=new SpeechSynthesisUtterance(t);this.voice&&(e.voice=this.voice),e.rate=1,e.pitch=1,this.synth.speak(e)}stop(){this.synth&&this.synth.cancel()}toggleMute(){return this.isMuted=!this.isMuted,this.isMuted&&this.stop(),this.isMuted}};var a=class{constructor(t="presentation.json"){this.configUrl=t,this.steps=[],this.currentStep=0,this.popup=new i,this.highlighter=new n,this.narrator=new p,this.isActive=!1,this.STORAGE_KEY="project-pa-step",this.popup.onNext=()=>this.next(),this.popup.onPrev=()=>this.prev(),this.popup.onClose=()=>this.stop(),this.popup.onMuteToggle=()=>this.narrator.toggleMute()}async start(){try{let t=await fetch(this.configUrl);if(!t.ok)throw new Error("Failed to load presentation");let e=await t.json();this.steps=e.steps;let o=localStorage.getItem(this.STORAGE_KEY);if(o!==null?(this.currentStep=parseInt(o,10),this.currentStep>=this.steps.length&&(this.currentStep=0)):this.currentStep=0,this.steps.length===0){console.warn("Project PA: No steps found");return}this.isActive=!0,this.currentStep=0,this.showCurrentStep()}catch(t){console.error("Project PA Error:",t),alert("Could not load presentation.json")}}stop(){this.clearAutoAdvance(),this.isActive=!1,this.popup.hide(),this.highlighter.hide(),this.narrator.stop(),localStorage.removeItem(this.STORAGE_KEY)}next(){this.clearAutoAdvance(),this.currentStep<this.steps.length-1?(this.currentStep++,localStorage.setItem(this.STORAGE_KEY,this.currentStep),this.showCurrentStep()):this.stop()}prev(){this.clearAutoAdvance(),this.currentStep>0&&(this.currentStep--,localStorage.setItem(this.STORAGE_KEY,this.currentStep),this.showCurrentStep())}showCurrentStep(){let t=this.steps[this.currentStep];if(!t)return;if(console.log(`Project PA: Showing Step ${this.currentStep}`,t),t.page){let o=window.location.href,s=t.page;if(console.log(`Project PA: Checking redirect. Current: ${o}, Target: ${s}`),o.endsWith(s))console.log("Project PA: Already on target page.");else{console.log(`Project PA: Redirecting to ${s}...`),window.location.href=s;return}}this.highlighter.highlight(t.target),this.popup.show(t.content,this.currentStep,this.steps.length),this.narrator.speak(t.content),t.actions&&t.actions.forEach(o=>{if(o.do==="click"&&o.selector){let s=document.querySelector(o.selector);s&&s.click()}}),this.timer&&clearTimeout(this.timer);let e=t.duration||5e3;this.timer=setTimeout(()=>{this.isActive&&this.currentStep<this.steps.length-1?this.next():this.isActive&&this.currentStep===this.steps.length-1&&this.stop()},e)}clearAutoAdvance(){this.timer&&(clearTimeout(this.timer),this.timer=null)}hasSavedState(){return localStorage.getItem(this.STORAGE_KEY)!==null}};var d=document.createElement("style");d.textContent=h;document.head.appendChild(d);var l=new a;l.hasSavedState()&&l.start();u(()=>{l.start()});console.log("Project PA Runtime Ready");})();
//# sourceMappingURL=project-pa.min.js.map
